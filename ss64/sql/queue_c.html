<!doctype html><html lang="en">

<!-- Mirrored from ss64.com/sql/queue_c.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 29 Aug 2020 00:09:56 GMT -->

<head><meta charset="UTF-8">
<meta name="viewport" content="width=768, initial-scale=1">
<link rel="STYLESHEET" href="../main.css" type="text/css">
<title>CREATE QUEUE - SQL Server - SS64.com</title>
</head><body><!-- #BeginLibraryItem "/Library/head_sql.lbi" --><div id="tnav"><ul>
<li class="tbtn"><a href="../index.html">SS64</a></li>
<li class="tbtn"><a href="index.html">SQL Server <svg viewBox="0 0 13 20.1" width="13" height="13" style="transform: rotate(0deg);"><path d="M0 2.9l7.2 7.2-7.1 7.1L3 20.1l7.1-7.1 2.9-2.9L2.9 0 0 2.9"></path></svg></a></li>
<li class="tbtn"><a href="syntax.html">How-to <svg viewBox="0 0 13 20.1" width="13" height="13" style="transform: rotate(0deg);"><path d="M0 2.9l7.2 7.2-7.1 7.1L3 20.1l7.1-7.1 2.9-2.9L2.9 0 0 2.9"></path></svg></a></li>
<li><div id="search"><form action="https://www.google.com/search" method="get">
<input type="text" name="q" id="q" size="27" maxlength="255">
<input class="submit" value="Search" id="btn" type="submit">
<input type="hidden" name="sitesearch" value="ss64.com/sql/"></form></div></li>
</ul></div><!-- #EndLibraryItem --><h1>CREATE QUEUE</h1>
<p>Create a message queue.</p>
<pre>Syntax
      CREATE QUEUE [<i>database</i>.[<i>schema</i>]. | <i>schema</i>.] <i>queue</i>
      [ WITH
        [ STATUS = {<u>ON</u> | OFF}  [ , ] ]
        [ RETENTION = {ON | <u>OFF</u>} [ , ] ] 
        [ ACTIVATION (
            [ STATUS = {<u>ON</u> | OFF} , ] 
              PROCEDURE_NAME = [<i>database</i>.[<i>schema</i>]. | <i>schema</i>.] <i>stored_procedure</i> ,
              MAX_QUEUE_READERS = <i>max_readers</i> , 
              EXECUTE AS { SELF | '<i>user_name</i>' | OWNER } 
               ) ]
      ]
        [ ON { <i>filegroup</i> | [DEFAULT] } ] 
      [;]

Key<i>
   queue</i>     The queue to be created.
   database  Database within which to create the new queue.
   STATUS    The queue is available (ON) or unavailable (OFF).
   RETENTION Retain all queue Messages using the conversations ends.
             (This can reduce performance)
   STATUS    When STATUS = OFF, the queue does not activate the stored procedure.
   MAX_QUEUE_READERS  Instances of the stored procedure that may run at the same time (0-32767)
   SELF      Run the stored procedure as the user who executes the CREATE QUEUE statement.
   OWNER     Run the stored procedure as the owner of the queue.</pre>
<p>  When a message arrives for a service, the Service Broker will place the message on the queue associated with the service.</p>
<p>Example</p>
<pre>CREATE QUEUE MyQueue1;

CREATE QUEUE MyQueue2
    WITH STATUS = ON,
      RETENTION = OFF,
      ACTIVATION (
          PROCEDURE_NAME = MyDatabase.dbo.myproc,
          MAX_QUEUE_READERS = 10,
          EXECUTE AS SELF )
    ON [DEFAULT] ;</pre>
<p class="quote"><i>&quot;An Englishman, even if he is alone, forms
an orderly queue of one&quot; - George Mikes </i></p>
<p><b>Related commands:</b></p>
<p>  <a href="queue_a.html">ALTER QUEUE</a><br>
  <a href="queue_d.html">DROP QUEUE</a>  <br>
Equivalent Oracle command:  <a href="../orap/DBMS_JOB.html">DBMS_JOB</a></p><!-- #BeginLibraryItem "/Library/foot_sql.lbi" --><p>
<script async src="../../pagead2.googlesyndication.com/pagead/js/f.txt"></script>
<!-- ss64-sql -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-6140977852749469"
     data-ad-slot="6953563613"
     data-ad-format="auto"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</p>
<hr>
<div id=bl>&nbsp;</div>
<div id=br>Copyright &copy; 1999-2020 <a href="../index.html">SS64.com</a><br>
Some rights reserved</div><!-- #EndLibraryItem --></body>

<!-- Mirrored from ss64.com/sql/queue_c.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 29 Aug 2020 00:09:56 GMT -->
</html>
