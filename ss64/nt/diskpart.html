<!doctype html><html lang="en">

<!-- Mirrored from ss64.com/nt/diskpart.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 29 Aug 2020 00:04:26 GMT -->

<head><meta charset="UTF-8">
<meta name="viewport" content="width=768, initial-scale=1">
<link rel="STYLESHEET" href="../main.css" type="text/css">
<title>DiskPart - Partition a disk - Windows CMD - SS64.com</title>
</head><body><!-- #BeginLibraryItem "/Library/head_nt.lbi" --><div id="tnav"><ul>
<li class="tbtn"><a href="../index.html">SS64</a></li>
<li class="tbtn"><a href="index.html">CMD <svg viewBox="0 0 13 20.1" width="13" height="13" style="transform: rotate(0deg);"><path d="M0 2.9l7.2 7.2-7.1 7.1L3 20.1l7.1-7.1 2.9-2.9L2.9 0 0 2.9"></path></svg></a></li>
<li class="tbtn"><a href="syntax.html">How-to <svg viewBox="0 0 13 20.1" width="13" height="13" style="transform: rotate(0deg);"><path d="M0 2.9l7.2 7.2-7.1 7.1L3 20.1l7.1-7.1 2.9-2.9L2.9 0 0 2.9"></path></svg></a></li>
<li><div id="search"><form action="https://www.google.com/search" method="get">
<input type="text" name="q" id="q" size="27" maxlength="255">
<input class="submit" value="Search" id="btn" type="submit">
<input type="hidden" name="sitesearch" value="ss64.com/nt/"></form></div></li>
</ul></div><!-- #EndLibraryItem --><h1>DiskPart</h1> 
<p>Disk Administration, Partition a disk. This page documents the Windows 8/10 + Server 2008-2016 versions of Diskpart. </p>
<pre>Syntax
      DISKPART<br>
Commands you can issue at the DISKPART prompt:

 ACTIVE  On basic disks, marks the partition with focus as active.

         DiskPart does not check the contents of the partition. If you mistakenly mark a partition as active
         and it does not contain the operating system startup files, your computer might not start.
         This informs the basic input/output system (BIOS) or Extensible Firmware Interface (EFI) that
         the partition or volume is a valid system partition or system volume.
         Only partitions can be marked as active. A partition must be selected for this operation to succeed.
         Use the select partition command to select a partition and shift the focus to it.

 ADD disk=<i>n</i> [align=<i>n</i>] [wait] [<abbr title="For scripting only. When an error is encountered, DiskPart continues to process commands as if the error did not occur.">noerr</abbr>]
         Mirror the simple volume with focus to the specified disk.

 ASSIGN  [{LETTER=<i>D</i>  | mount=<i>path</i>}] [<abbr title="For scripting only. When an error is encountered, DiskPart continues to process commands as if the error did not occur.">noerr</abbr>]
         Assign a drive letter or mount point to the volume with focus. (Only Server 2012-2016)

         If no drive letter or mount point is specified, the next available drive letter is assigned.
         By using the assign command, you can change the drive letter associated with a removable drive.
         You cannot assign drive letters to system volumes, boot volumes, or volumes that contain the paging file.
         In addition, you cannot assign a drive letter to an Original Equipment Manufacturer (OEM) partition
         or any GUID Partition Table (gpt) partition other than a basic data partition.
         A volume must be selected for this operation to succeed.
         Use the select volume command to select a volume and shift the focus to it.
         ## Example To assign the letter E to the volume in focus, type: assign letter=e

 ATTRIBUTES DISK [{set | clear}] [readonly] [noerr]<br> ATTRIBUTES VOLUME [{set | clear}] [{hidden | readonly | nodefaultdriveletter | shadowcopy}] [<abbr title="For scripting only. When an error is encountered, DiskPart continues to process commands as if the error did not occur.">noerr</abbr>]
         Display, set, or clear the attributes of a disk or volume.

 AUTOMOUNT [enable] [disable] [scrub] [<abbr title="For scripting only. When an error is encountered, DiskPart continues to process commands as if the error did not occur.">noerr</abbr>]
         Enable or disable the automount feature.

 BREAK disk=<i>n</i> [nokeep] [<abbr title="For scripting only. When an error is encountered, DiskPart continues to process commands as if the error did not occur.">noerr</abbr>]
         Break the mirrored volume with focus into two simple volumes.

 CLEAN [all]       (Only Server 2012-2016)
         Remove any and all partition or volume formatting from the disk with focus, 'all' will Zero the disk.

 COMPACT vdisk       (Only Windows 7 + Windows Server 2008R2-2016)
         Reduce the physical size of a dynamically expanding virtual hard disk (VHD) file.
         This parameter is useful because dynamically expanding VHDs increase in size as you add files, but they do
         not automatically reduce in size when you delete files.

 <a href="convert.html">CONVERT</a> Convert file allocation table (FAT) and FAT32 volumes to the NTFS file system. 

 CREATE partition efi [size=<i>n</i>] [offset=<i>n</i>] [<abbr title="For scripting only. When an error is encountered, DiskPart continues to process commands as if the error did not occur.">noerr</abbr>]
 CREATE partition extended [size=<i>n</i>] [offset=<i>n</i>] [align=<i>n</i>] [<abbr title="For scripting only. When an error is encountered, DiskPart continues to process commands as if the error did not occur.">noerr</abbr>]
 CREATE partition logical [size=<i>n</i>] [offset=<i>n</i>] [align=<i>n</i>] [<abbr title="For scripting only. When an error is encountered, DiskPart continues to process commands as if the error did not occur.">noerr</abbr>]
 CREATE partition msr [size=<i>n</i>] [offset=<i>n</i>] [<abbr title="For scripting only. When an error is encountered, DiskPart continues to process commands as if the error did not occur.">noerr</abbr>]
 CREATE partition primary [size=<i>n</i>] [offset=<i>n</i>] [id={ <i>byte</i> | <i>guid</i> }] [align=<i>n</i>] [<abbr title="For scripting only. When an error is encountered, DiskPart continues to process commands as if the error did not occur.">noerr</abbr>]
         Create a partition.

 CREATE volume raid [size=<i>n</i>] disk=<i>n</i>,<i>n</i>,<i>n</i>[,<i>n</i>,...] [align=<i>n</i>] [<abbr title="For scripting only. When an error is encountered, DiskPart continues to process commands as if the error did not occur.">noerr</abbr>]
 CREATE volume simple [size=<i>n</i>] [disk=<i>n</i>] [align=<i>n</i>] [<abbr title="For scripting only. When an error is encountered, DiskPart continues to process commands as if the error did not occur.">noerr</abbr>]
 CREATE volume stripe [size=<i>n</i>] disk=<i>n</i>,<i>n</i><i></i>[,<i>n</i>,...] [align=<i>n</i>] [<abbr title="For scripting only. When an error is encountered, DiskPart continues to process commands as if the error did not occur.">noerr</abbr>]
 CREATE volume mirror [size=<i>n</i>] disk=<i>n</i>,<i>n</i><i></i>[,<i>n</i>,...] [align=<i>n</i>] [<abbr title="For scripting only. When an error is encountered, DiskPart continues to process commands as if the error did not occur.">noerr</abbr>]
         Create a volume.

 CREATE vdisk file=<i>filepath</i> {[type={fixed|expandable}] | [parent=<i>filepath</i>] | [source=<i>filepath</i>]}
                      [maximum=<i>n</i>] [sd=<i>SDDL</i>] [<abbr title="For scripting only. When an error is encountered, DiskPart continues to process commands as if the error did not occur.">noerr</abbr>]
         Create a virtual disk (VHD).

 DELETE disk [<abbr title="For scripting only. When an error is encountered, DiskPart continues to process commands as if the error did not occur.">noerr</abbr>] [override]
 DELETE partition [<abbr title="For scripting only. When an error is encountered, DiskPart continues to process commands as if the error did not occur.">noerr</abbr>] [override]
 DELETE volume [<abbr title="For scripting only. When an error is encountered, DiskPart continues to process commands as if the error did not occur.">noerr</abbr>]
         Delete a partition, volume or a dynamic disk from the list of disks.

 DETAIL Disk
 DETAIL Partition
 DETAIL volume
         Display properties of the selected disk/volume/partition, display the disks on which the current volume resides:

 EXIT    Exit Diskpart


 EXPAND vdisk maximum=<i>n</i>
         Expand the max size (in MB) available on a virtual disk (Win7 + Windows Server 2008R2-2016).


 EXTEND [size=<i>n</i>] [disk=<i>n</i>] [<abbr title="For scripting only. When an error is encountered, DiskPart continues to process commands as if the error did not occur.">noerr</abbr>]
 EXTEND filesystem [<abbr title="For scripting only. When an error is encountered, DiskPart continues to process commands as if the error did not occur.">noerr</abbr>]
         Extend a volume or partition with focus and its file system into free space on a disk. (Server 2012-2016)
            size= The space in MB.
            disk= The disk on which the volume or partition is extended. Default = current disk.

 FILESYSTEMS
         Display the current and supported file systems on the volume (Use 'Select Volume' first)

 <a href="diskpart-format.html">FORMAT</a> [[FS=<i>FS</i>] [REVISION=<i>X.XX</i>] | RECOMMENDED] [LABEL=&quot;<i>label</i>&quot;] [UNIT=<i>N</i>]
            [QUICK] [COMPRESS] [OVERRIDE] [DUPLICATE] [NOWAIT] [<abbr title="For scripting only. When an error is encountered, DiskPart continues to process commands as if the error did not occur.">noerr</abbr>]
         Format a disk for use with Windows.

 GPT attributes=<i>n</i>     (Only Server 2012-2016)  OEM use only.
      Assign attributes to the selected GUID partition table (GPT) partition:

 HELP [<i>command</i>]

 IMPORT
         Imports a transportable shadow copy from a loaded metadata file into the system.
         Before you can use <a href="https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/import#BKMK_examples">import</a>, you must load a DiskShadow metadata file using the load metadata command.

 INACTIVE
         On basic master boot record (MBR) disks, marks the system partition or boot partition
         with focus as inactive [don&rsquo;t boot]. Use 'Select Partition' first.
         Your computer might not start without an active partition. 

 LIST Disk
 LIST Partition
 LIST Volume
 LIST vdisk                           (Windows 7/10 / Server 2008 R2)
 LIST writers [metadata | detailed | status]
 LIST shadows {all | set <i>SetID</i> | id <i>ShadowID</i>}
 LIST providers
         Display a list of objects
            <i>SetID </i>List shadow copies that belong to the specified Shadow Copy Set ID.
         <i>ShadowID</i> List any shadow copy with the specified shadow copy ID


 MERGE vdisk depth=<i>n           </i>(Windows 7/Server 2008R2-2016)
         Merge a differencing virtual hard disk (VHD) with its corresponding parent VHD.
         depth=1 will merge with parent.
         The parent VHD will be modified to include the modifications from the differencing VHD.

 OFFLINE disk [<abbr title="For scripting only. When an error is encountered, DiskPart continues to process commands as if the error did not occur.">noerr</abbr>]
 OFFLINE volume [<abbr title="For scripting only. When an error is encountered, DiskPart continues to process commands as if the error did not occur.">noerr</abbr>]
         Take an online disk or volume to the offline state, use 'Select Disk' first)

 ONLINE disk [<abbr title="For scripting only. When an error is encountered, DiskPart continues to process commands as if the error did not occur.">noerr</abbr>]
 ONLINE volume [<abbr title="For scripting only. When an error is encountered, DiskPart continues to process commands as if the error did not occur.">noerr</abbr>]
         Take an offline disk or volume to the online state.

 RECOVER [<abbr title="For scripting only. When an error is encountered, DiskPart continues to process commands as if the error did not occur.">noerr</abbr>]
         Refresh the state of all disks in the selected pack, attempt recovery on disks in the invalid 
         pack, and resynchronize mirrored volumes and RAID-5 volumes that have stale plex or parity data.
         Only applicable to dynamic disks.

 REM  (remark/comment)


 REMOVE letter=<i>E</i> [dismount] [<abbr title="For scripting only. When an error is encountered, DiskPart continues to process commands as if the error did not occur.">noerr</abbr>]    Remove drive letter <i>E</i> from the in-focus partition.
 REMOVE mount=<i>path</i> [dismount] [<abbr title="For scripting only. When an error is encountered, DiskPart continues to process commands as if the error did not occur.">noerr</abbr>]  Remove mount point from the in-focus partition.
 REMOVE all [dismount] [<abbr title="For scripting only. When an error is encountered, DiskPart continues to process commands as if the error did not occur.">noerr</abbr>]         Remove ALL current drive letters and mount points.
         Remove a drive letter or mount point from a volume.

 REPAIR disk=<i>n</i> [align=<i>N</i>] [<abbr title="For scripting only. When an error is encountered, DiskPart continues to process commands as if the error did not occur.">noerr</abbr>]
         Repair a RAID-5 volume with a failed member by replacing with a specified dynamic disk.
         align = <i>N</i>   Align all volume extents to the closest alignment boundary.
         Extent offsets will be a multiple of <i>N</i>.

 RESCAN  Locate new disks and volumes that have been added to the computer.
 RETAIN  Prepare an existing dynamic simple volume to be used as a boot or system volume.


 SAN [policy={<abbr title="All newly discovered disks will be brought online and made read/write. (Don't use for clusters)">OnlineAll</abbr> | <abbr title="All newly discovered disks except the startup disk will be offline and read-only by default.">OfflineAll</abbr> | <abbr title="All newly discovered disks that do not reside on a shared bus (such as SCSI and iSCSI) are brought online and made read-write. Disks that are left offline will be read-only by default.">OfflineShared</abbr>}] [<abbr title="For scripting only. When an error is encountered, DiskPart continues to process commands as if the error did not occur.">noerr</abbr>]
         Display or set the SAN policy for the currently booted OS.
         Specifying onlineAll on a server that shares disks could lead to data corruption.
         Do not set this policy if disks are shared among servers unless the server is part of a cluster.


 SELECT Disk={ <i>n</i> | <i>diskpath</i> | system | next }
 SELECT Partition=<i>n</i>   (Volume number)
 SELECT Volume={ <i>n</i> | <i>d </i>} [<abbr title="For scripting only. When an error is encountered, DiskPart continues to process commands as if the error did not occur.">noerr</abbr>] (Volume number or Drive Letter)
 SELECT vdisk file=<i>fullpath</i> [<abbr title="For scripting only. When an error is encountered, DiskPart continues to process commands as if the error did not occur.">noerr</abbr>]
         Shift the focus to an object.

 SET ID={ <i>byte</i> | <i>GUID</i> } [override] [noerr]
         Change the partition type for the partition with focus (for OEM use):


 SHRINK [desired=<i>n</i>] [minimum=<i>n</i>] [<abbr title="Return immediately while the operation is still in progress.">nowait</abbr>] [<abbr title="For scripting only. When an error is encountered, DiskPart continues to process commands as if the error did not occur.">noerr</abbr>]  (Reduce the size of the in-focus volume)<br> SHRINK <abbr title="Returns the maximum amount of space in MB by which the volume can be reduced.">querymax</abbr> [noerr]
         Reduce the size of the selected volume.
         Desired = Desired space in MB.
         Minimum = space in MB to reduce the volume by.
         QueryMax = Returns the maximum number of bytes that the volume can be reduced by.

 UNIQUEID disk [id={<i>dword</i> | <i>GUID</i>}] [<abbr title="For scripting only. When an error is encountered, DiskPart continues to process commands as if the error did not occur.">noerr</abbr>]
         Display or set the GUID partition table identifier or MBR signature for
         the (basic or dynamic) disk with focus.
         id= For MBR disks specify a 4-byte DWORD in hex form for the signature.
<b>
Commands to Manage Basic Disks:</b>

 ASSIGN MOUNT=<i>path</i>  (Choose a mount point path for the volume)

 CREATE PARTITION Primary Size=50000  (50 GB)
 CREATE PARTITION Extended Size=25000
 CREATE PARTITION logical Size=25000
 DELETE Partition
 EXTEND Size=10000
 GPT attributes=<i>n</i>   (assign GUID Partition Table attributes)
 SET id=<i>byte</i>|<i>GUID</i> [override] [noerr]   (Change the partition type)

<b>Commands to Manage Dynamic Disks:</b>

 ADD disk=<i>n</i>   (Add a mirror to the in-focus SIMPLE volume on the specified disk
               see 'Diskpart Help' for more.)
 BREAK disk=<i>n</i>  (Break the current in-focus mirror)
 CREATE VOLUME Simple Size=<i>n</i> Disk=<i>n</i>
 CREATE VOLUME Stripe Size=<i>n</i> Disk=<i>n</i>,<i>n</i>,...
 CREATE VOLUME Raid Size=<i>n</i> Disk=<i>n</i>,<i>n</i>,...
 DELETE DISK
 DELETE PARTITION
 DELETE VOLUME
 EXTEND Disk=<i>n</i> [Size=<i>n</i>]
 EXTEND Filesystem [noerr]
 IMPORT [noerr]   (Import a foreign disk group, use 'Select disk' first)
 RECOVER [noerr]  (Refresh disk pack state, attempt recovery on an invalid pack,
                   &amp; resynchronize stale plex/parity data.)
 REPAIR disk=<i>n</i> [align=<i>n</i>] [noerr]  (Repair the RAID-5 volume with focus, replace with the specified dynamic disk)
 RETAIN   (Prepare an existing dynamic simple volume to be used as a boot or system volume)</pre>
<p>When setting up a new drive, create in this order: Create Partition, Format drive, Assign drive letter.</p>
<p>The diskpart commands can be placed in a text file (one command per line) and
used  as an input file to diskpart.exe:</p>
<pre>DiskPart.exe &lt; myscript.txt
</pre>
<p>When selecting a volume or partition, you can use either the number or drive letter or the mount point path.</p>
<p>The Windows GUI interface can also be used to assign a mount-point folder path to a drive. In <span class="code">Disk Manager</span>, right-click the partition or volume, and  click <span class="code">Change Drive Letter and Paths</span>,     then click <span class="code">Add</span> and then type the path to an empty folder on an NTFS volume.</p>
<p>The Windows <a href="syntax-recovery.html">Recovery Console</a>, includes a simplified DISKPART command. It only provides functionality for adding and deleting partitions, but not for setting an active partition.</p>
<p>Always  back up the hard disk before running diskpart.</p>
<p> Examples:<br>
</p>
<pre>
SELECT DISK=0
CREATE PARTITION PRIMARY
SELECT PARTITION=1
FORMAT FS=NTFS LABEL="New Volume" QUICK<br>ASSIGN LETTER=E
EXIT </pre>
<p>The default SAN policy in Windows Server 2008 / R2 is now VDS_SP_OFFLINE_SHARED for all non boot SAN disks.<br>
This  means that the disks will be offline at server startup (even if the drive contains a paging file).</p>
<p>This Disk Management error message indicates that the drive is offline:</p>
<blockquote>
<p class="code">&quot;the disk is offline because of policy set by an administrator&quot;.</p>
</blockquote>
<p>Query the current SAN policy to see if it is Offline Shared</p>
<p class="code">DISKPART.EXE <br>
DISKPART&gt; san <br>
SAN Policy : Offline Shared</p>
<p>To manually bring the disks online: <br>
<span class="code">Computer Management &gt; Storage &gt; Disk Management</span>, right-click the disk and choose <span class="code">Online</span>.</p>
<p>If these are <b>not</b> part of a cluster, than an alternative is to make a SAN policy change,  select the offline disk, clear  its readonly flag and bring it online:</p>
<pre> DISKPART&gt; san policy=OnlineAll 
 DiskPart successfully changed the SAN policy for the current operating system. 
 
 DISKPART&gt; LIST DISK 
 Disk ### Status        Size    Free    Dyn Gpt
 -------- ------------- ------- ------- --- ---
 Disk 0   Online         80 GB     0 B
 * Disk 1 Offline        20 GB  1024 KB 
 
 DISKPART&gt; select disk 1 
 Disk 1 is now the selected disk. 
 
 DISKPART&gt; ATTRIBUTES DISK CLEAR READONLY</pre>
<pre> DISKPART&gt; ONLINE DISK
 DiskPart successfully onlined the selected disk.</pre>
<p><i class="quote">&ldquo;Divide et impera&rdquo; ~ Latin saying (Divide and conquer)</i><br>
<br>
Related:<br>
<br>
<span class="space"><a href="https://support.microsoft.com/en-us/help/325590/">Q325590</a> - Use Diskpart.exe to extend a data volume.<br>
<a href="fsutil.html">FSUTIL</a> - File and Volume utilities.<br>
<a href="diskshadow.html">DISKSHADOW</a> - Volume Shadow Copy Service.<br>
PowerShell equivalents: get-disk, set-partition, get-volume <br>
Equivalent bash command (Linux): <a href="../bash/fdisk.html">fdisk</a> - Partition table manipulator for Linux.</span></p><!-- #BeginLibraryItem "/Library/foot_nt.lbi" --><p>
<script async src="../../pagead2.googlesyndication.com/pagead/js/f.txt"></script>
<!-- windows300 -->
<ins class="adsbygoogle"
     style="display:inline-block;width:300px;height:250px"
     data-ad-client="ca-pub-6140977852749469"
     data-ad-slot="7649547908"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</p>
<hr>
<div id=bl>&nbsp;</div>
<div id=br>Copyright &copy; 1999-2020 <a href="../index.html">SS64.com</a><br>
Some rights reserved</div><!-- #EndLibraryItem --></body>

<!-- Mirrored from ss64.com/nt/diskpart.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 29 Aug 2020 00:04:26 GMT -->
</html>