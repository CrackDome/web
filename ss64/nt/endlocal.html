<!doctype html><html lang="en">

<!-- Mirrored from ss64.com/nt/endlocal.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 29 Aug 2020 00:04:34 GMT -->

<head><meta charset="UTF-8">
<meta name="viewport" content="width=768, initial-scale=1">
<link rel="STYLESHEET" href="../main.css" type="text/css">
<title>Endlocal - Local environment variables - Windows CMD - SS64.com</title>
</head><!-- #BeginLibraryItem "/Library/head_nt.lbi" --><div id="tnav"><ul>
<li class="tbtn"><a href="../index.html">SS64</a></li>
<li class="tbtn"><a href="index.html">CMD <svg viewBox="0 0 13 20.1" width="13" height="13" style="transform: rotate(0deg);"><path d="M0 2.9l7.2 7.2-7.1 7.1L3 20.1l7.1-7.1 2.9-2.9L2.9 0 0 2.9"></path></svg></a></li>
<li class="tbtn"><a href="syntax.html">How-to <svg viewBox="0 0 13 20.1" width="13" height="13" style="transform: rotate(0deg);"><path d="M0 2.9l7.2 7.2-7.1 7.1L3 20.1l7.1-7.1 2.9-2.9L2.9 0 0 2.9"></path></svg></a></li>
<li><div id="search"><form action="https://www.google.com/search" method="get">
<input type="text" name="q" id="q" size="27" maxlength="255">
<input class="submit" value="Search" id="btn" type="submit">
<input type="hidden" name="sitesearch" value="ss64.com/nt/"></form></div></li>
</ul></div><!-- #EndLibraryItem --><h1>ENDLOCAL</h1> 
<p> End localisation of environment changes in a batch file. Pass variables from one batch file to another.
<pre>Syntax
      ENDLOCAL</pre>
<p>If <a href="setlocal.html">SETLOCAL</a> is used to make variables 'local' to one batch script, then those variables will be invisible to all other batch scripts unless explicitly passed using an <span class="code">ENDLOCAL &amp; SET...</span> command.</p>
<p>If <span class="code">SETLOCAL</span> is used without a corresponding <span class="code">ENDLOCAL</span> then local environment variables will be discarded when the batch file ends.<br>
In effect the <span class="code">ENDLOCAL</span> happens automatically when the script terminates.</p>
<p>Ending a cmd.exe session will discard all Environment Variables both local and global.</p>
<p>If a batch script does not use <span class="code">SETLOCAL</span> then all variables will be Global, i.e. visible and modifiable from other calling scripts or on the command line after the script has completed. </p>
<h2>  Passing variables from one routine to another</h2>
<blockquote>
<p>The CMD command processor always works on a line-by-line basis, so it will convert all <span class="code">%variables%</span> into their text values before executing any of the commands.<br>
<br>
By putting <span class="code">ENDLOCAL <a href="syntax-redirection.html">&amp;</a> SET commands</span> on a single line you are able to SET a variable just before the localisation is ended by the ENDLOCAL command.</p>
<p>ENDLOCAL does not reset <span class="code">%errorlevel%</span><br>
  <br>
  <b>Examples</b>:</p>
<pre>::Sales.cmd
   
   @Echo off
   SETLOCAL
      Set _item=&quot;Ice Cream Maker&quot;
      Set _price=450
   ENDLOCAL <b>&amp;</b> SET _return1=%_item%<b>&amp;</b> SET _return2=%_price%

::Results.cmd

   @Echo off
   SETLOCAL
   CALL Sales.cmd
   Echo [%_return1%] will cost [%_return2%]

::SubDemo.cmd
   
   @Echo off
   SETLOCAL
   CALL :sub_products
   Echo [%_return1%] will cost [%_return2%]
   goto:eof

   :sub_products
   SETLOCAL
      Set _item=&quot;Coffee Grinder&quot;
      Set _price=150
   ENDLOCAL <b>&amp;</b> SET _return1=%_item%<b>&amp;</b> SET _return2=%_price%
</pre>
<p>Multiple SET 
commands can be added  to pass multiple variables, just prefix each with an <b>&amp;</b><br>
Be aware that any trailing spaces &nbsp;&nbsp;&nbsp;will be added to the variables value. </p>
</blockquote>
<h2>Improving readability</h2>
<blockquote>
<p>The 'ENDLOCAL <b>&amp;</b> SET' technique described above can become difficult to read if you  have a lot of SET commands all on the same line. This can be made  easier to read if you use parentheses.</p>
<p class="code">Endlocal&amp;(<br>
set &quot;_return1=%_item%&quot;<br>
set &quot;_return2=%_price%&quot;<br>
set &quot;_return3=%_discount%&quot;)</p>
<p>In these examples we have used the variable names <span class="code">_return1, _return2</span> etc, and quoted all the assignments. You can of course use any names for the return variables, even re-use the exact same variable name inside and outside the ENDLOCAL command (<span class="code">SET _price=%_price%</span>) </p>
</blockquote>
<p>ENDLOCAL does not set or clear the <a href="errorlevel.html">Errorlevel</a>.<br>
ENDLOCAL is an <a href="syntax-internal.html">internal</a> command.</p>
<p class="quote"><i>&quot;A good place to visit, but a poor place to stay&quot; - Josh Billings</i></p>
<p><b>Related:</b><br>
<br>
<span class="space"><a href="setlocal.html">SETLOCAL</a> - Begin localisation of environment variables in a batch file.<br>
How-to: <a href="syntax-functions.html">Functions</a> - How to package blocks of code with 'tunneling'.<br>
Equivalent bash command (Linux): <a href="../bash/readonly.html">readonly</a> - Mark variables/functions  as readonly.</span></p><!-- #BeginLibraryItem "/Library/foot_nt.lbi" --><p>
<script async src="../../pagead2.googlesyndication.com/pagead/js/f.txt"></script>
<!-- windows300 -->
<ins class="adsbygoogle"
     style="display:inline-block;width:300px;height:250px"
     data-ad-client="ca-pub-6140977852749469"
     data-ad-slot="7649547908"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</p>
<hr>
<div id=bl>&nbsp;</div>
<div id=br>Copyright &copy; 1999-2020 <a href="../index.html">SS64.com</a><br>
Some rights reserved</div><!-- #EndLibraryItem --></body>

<!-- Mirrored from ss64.com/nt/endlocal.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 29 Aug 2020 00:04:34 GMT -->
</html>