<!doctype html><html lang="en">

<!-- Mirrored from ss64.com/ps/syntax-set-eol.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 29 Aug 2020 00:08:58 GMT -->

<head><meta charset="UTF-8">
<meta name="viewport" content="width=768, initial-scale=1">
<link rel="STYLESHEET" href="../main.css" type="text/css">
<title>set-eol.ps1 CR/LF - PowerShell - SS64.com</title>
</head><body><!-- #BeginLibraryItem "/Library/head_pssyntax.lbi" --><div id="tnav"><ul>
<li class="tbtn"><a href="../index.html">SS64</a></li>
<li class="tbtn"><a href="index.html">PowerShell <svg viewBox="0 0 13 20.1" width="13" height="13" style="transform: rotate(0deg);"><path d="M0 2.9l7.2 7.2-7.1 7.1L3 20.1l7.1-7.1 2.9-2.9L2.9 0 0 2.9"></path></svg></a></li>
<li class="tbtn"><a href="syntax.html">How-to <svg viewBox="0 0 13 20.1" width="13" height="13" style="transform: rotate(0deg);"><path d="M0 2.9l7.2 7.2-7.1 7.1L3 20.1l7.1-7.1 2.9-2.9L2.9 0 0 2.9"></path></svg></a></li>
<li><div id="search"><form action="https://www.google.com/search" method="get">
<input type="text" name="q" id="q" size="27" maxlength="255">
<input class="submit" value="Search" id="btn" type="submit">
<input type="hidden" name="sitesearch" value="ss64.com/ps/"></form></div></li>
</ul></div><!-- #EndLibraryItem --><h1>How-to: Change the line endings of a text file [set-eol.ps1]</h1>
<p>A PowerShell script to change the line endings of a text file.<br>
This script will work even for a source file that contains a mixture of different file endings.</p>
<pre># set-eol.ps1
# Change the line endings of a text file to: Windows (CR/LF), Unix (LF) or Mac (CR)
#
# Requires PowerShell 3.0 or greater:
#Requires â€“Version 3

# Syntax
#     ./set-eol.ps1 -lineEnding {mac|unix|win} -file <i>FullFilename</i>

#     mac, unix or win  : The file endings desired.
#     <i>FullFilename</i>      : The full pathname of the file to be modified.

#     example:
#     ./set-eol win &quot;c:\demo\data.txt&quot;

[CmdletBinding()]
Param(
  [Parameter(Mandatory=$True,Position=1)]
    [ValidateSet(&quot;mac&quot;,&quot;unix&quot;,&quot;win&quot;)] 
    [string]$lineEnding,
  [Parameter(Mandatory=$True)]
    [string]$file
)

# Convert the friendly name into a PowerShell EOL character
Switch ($lineEnding) {
  &quot;mac&quot;  { $eol=&quot;`r&quot; }
  &quot;unix&quot; { $eol=&quot;`n&quot; }
  &quot;win&quot;  { $eol=&quot;`r`n&quot; }
} 

# Replace CR+LF with LF
$text = [IO.File]::ReadAllText($file) -replace &quot;`r`n&quot;, &quot;`n&quot;
[IO.File]::WriteAllText($file, $text)

# Replace CR with LF
$text = [IO.File]::ReadAllText($file) -replace &quot;`r&quot;, &quot;`n&quot;
[IO.File]::WriteAllText($file, $text)

#  At this point all line-endings should be LF.

# Replace LF with intended EOL char
if ($eol -ne &quot;`n&quot;) {
  $text = [IO.File]::ReadAllText($file) -replace &quot;`n&quot;, $eol
  [IO.File]::WriteAllText($file, $text)
}
Echo &quot;   ** Completed **&quot;
</pre>
<p> For instructions of how to download and run this script see: <a href="syntax-run.html">Run a PowerShell script</a>.</p>
<p>The script loads the whole file into memory so may not be suitable for very large files. The normal PowerShell routine  to replace characters is <a href="replace.html">.replace</a> but that will add a trailing CR/LF, so we use <span class="code">::WriteAllText</span> instead.</p>
<p>A simple but less flexible method from <a href="https://web.archive.org/web/20141010175618/http://powershell.com/cs/blogs/tips/archive/2014/10/03/normalizing-line-endings.aspx"> PowerShell.com</a>, is below. Get-Content will identify even non-standard line breaks, so the result is a string array of lines. When these lines are written  back into a new file, <a href="set-content.html">Set-Content</a> will insert the default Windows CR/LF line endings.</p>
<pre>$OldFile = &quot;$home\input.txt&quot;
$NewFile = &quot;$home\output.txt&quot;
Get-Content $OldFile | Set-Content -Path $NewFile</pre>
<p class="quote"><i>&ldquo;Well, it's all right, if you live the life you please, Well, it's all right, even if the sun don't shine, Well, it's all right, we're going to the end of the line&rdquo; ~ Traveling Wilburys, End Of The Line</i></p>
<p><b>Related PowerShell Cmdlets:</b></p>
<p class="space"><a href="../ascii.html">ASCII table</a><br>
<a href="syntax-stampme.html">StampMe</a> - Rename a file with the current Date/Time.</p><!-- #BeginLibraryItem "/Library/foot_ps.lbi" --><p><script async src="../../pagead2.googlesyndication.com/pagead/js/f.txt"></script>
<!-- PowerShell300 -->
<ins class="adsbygoogle"
     style="display:inline-block;width:300px;height:250px"
     data-ad-client="ca-pub-6140977852749469"
     data-ad-slot="6253539900"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</p>
<hr>
<div id=bl>&nbsp;</div>
<div id=br>Copyright &copy; 1999-2020 <a href="../index.html">SS64.com</a><br>
Some rights reserved</div><!-- #EndLibraryItem --></body>

<!-- Mirrored from ss64.com/ps/syntax-set-eol.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 29 Aug 2020 00:08:58 GMT -->
</html>
